<div class="ss">
  <div class="fundo"><br>
  <div class="principal">
    <blockquote class="carrinho">
      <ng-container *ngIf="carrinhoItens.length > 0; else carrinhoVazio">
        <div class="carrinho-container">
          <div *ngFor="let item of carrinhoItens" class="carrinho-item mat-elevation-z2">
            <img class="imagem-do-carrinho" [src]="item.urlImagem">
            <div class="carrinho-item-details">
              <h3>{{ item.nome }}</h3>
              <p>Preço: {{ item.preco | currency:'BRL':'symbol':'1.2-2' }}</p>
              <p>Quantidade: {{ item.quantidade }}</p>
              <p>Total: {{ item.quantidade * item.preco | currency:'BRL':'symbol':'1.2-2' }}</p>
              <button mat-raised-button color="warn" (click)="removerItem(item)">Remover do Carrinho</button>
            </div>
          </div>
        </div>
        <div class="carrinho-total mat-elevation-z2">
          <p><strong>Total do Carrinho: {{ calcularTotal() | currency:'BRL':'symbol':'1.2-2' }}</strong></p>

          <button mat-raised-button color="primary" routerLink="/compras/produtos">Escolher mais
            produtos</button>
          <button (click)="continuarCompra()" mat-raised-button color="accent">Continuar
            Compra</button>


        </div>
        <div class="continuando" *ngIf="continuar == true">
          <ng-container>
            <h1>Selecionar Endereço</h1>

            <div class="info card">
              <h1>
                Endereço de {{usuarioLogado?.nome}}
              </h1>
              <p><strong>Logradouro: </strong> {{usuarioLogado?.endereco?.logradouro}}</p>
              <p><strong>Bairro: </strong> {{usuarioLogado?.endereco?.bairro}}</p>
              <p><strong>Número: </strong> {{usuarioLogado?.endereco?.numero}}</p>
              <p><strong>Complemento: </strong> {{usuarioLogado?.endereco?.complemento}}</p>
              <p><strong>Cep: </strong> {{usuarioLogado?.endereco?.cep}}</p>
              <p><strong>Cidade: </strong> {{usuarioLogado?.endereco?.cidade?.nome}}</p>

              <!-- Adiciona uma opção de seleção ao lado -->
              <button (click)="selecionarEndereco()" mat-icon-button color="primary">
                <mat-icon *ngIf="enderecoSelecionado">check_circle</mat-icon>
                <div *ngIf="!enderecoSelecionado" class="circulo-branco"></div>
              </button>
              <button mat-icon-button color="primary" (click)="abrirDialogoConfirmacao()">
                <mat-icon>edit</mat-icon>
              </button>
            </div>

            <button (click)="seguirParaPagamento()" mat-raised-button color="primary" [disabled]="!enderecoSelecionado">
              Seguir para pagamento
            </button>
          </ng-container>


          <br><br>
          <ng-container *ngIf="pagando == true">
            <h1>Escolha a forma de pagamento</h1>
            <form>
              <label>
                <input type="radio" name="paymentOption" value="pix" [(ngModel)]="selectedOption"> Pix
              </label>

              <label>
                <input type="radio" name="paymentOption" value="boleto" [(ngModel)]="selectedOption"> Boleto
              </label>

              <label>
                <input type="radio" name="paymentOption" value="cartao" [(ngModel)]="selectedOption"> Cartão
              </label>

            </form>
            <div *ngIf="selectedOption === 'pix'">
              <p class="final">Pix Gerado!</p>
              <button (click)="finalizarCompra()" mat-raised-button color="accent">Finalizar Compra</button>
            </div>

            <div *ngIf="selectedOption === 'boleto'">
              <p class="final">Boleto Gerado!</p>
              <button (click)="finalizarCompra()" mat-raised-button color="accent">Finalizar Compra</button>
            </div>

            <div *ngIf="selectedOption === 'cartao'">
              <p>Opção selecionada: Cartão</p>
            </div>


          </ng-container>
        </div>

      </ng-container>
    </blockquote>
    <ng-template #carrinhoVazio>
      <div class="carrinho-vazio">
        <p>O carrinho está vazio.</p>
      </div>
    </ng-template>
  </div>
</div>
</div>